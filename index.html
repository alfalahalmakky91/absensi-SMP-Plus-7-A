<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Presensi Kelas 7A</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #e7f0ff;
        padding: 20px;
    }
    h1, h3 {
        text-align: center;
    }
    .container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        max-width: 700px;
        margin: auto;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
        font-weight: bold;
    }
    select, input {
        width: 100%;
        padding: 6px;
        margin-top: 5px;
    }
    .btn {
        background: #007bff;
        color: white;
        padding: 10px 15px;
        border: none;
        margin-top: 15px;
        width: 100%;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
    }
</style>

</head>
<body>

<div class="container">

<h1>Presensi Kelas 7A</h1>
<h3>SMP Plus Al-Falah Al-Makky</h3>
<hr>

<label>Mapel:</label>
<input type="text" id="mapel">

<label>Nama Guru:</label>
<input type="text" id="nama_guru">

<label>Hari & Tanggal:</label>
<input type="text" id="hari_tanggal">

<label>Materi:</label>
<input type="text" id="materi">

<br><br>
<h3>Kehadiran Siswa</h3>

<div id="siswaList"></div>

<button class="btn" onclick="kirimLaporan()">Kirim Laporan</button>

</div>

<script>
// ================================
// DAFTAR SISWA
// ================================
const siswa = [
  "ABDUN RAJA ZULFA LADAIH",
  "ACHMAD ALBA CHOIRUNNIZAM",
  "ADAM A. BUSTOMI",
  "AHMAD SAIFULLOH",
  "AHMAD SYAMSUDIN",
  "ALFINO R.",
  "ANANDA RAFA ARIZKY RAMADHAN",
  "ANAS MOENER",
  "DIMAS KHOIRIL",
  "HAFIDZ MAULANA HAQ",
  "HASAN AMINULLOH",
  "HASAN MUBAROK",
  "HENDRA ADITYA SAPUTRA",
  "JUNIOR VEGO WIJAYA",
  "KEIALO GIOVANCO DA SELVA",
  "KEILO GIOVINCO DA SELVA",
  "KEVIN RAMADHANI",
  "KHOIRUL FATIHIN",
  "M KAYYIS KIROM",
  "M. ALMAHENDRA",
  "M. ALZAM RAIHAN SAID",
  "M. ANWAR NUR",
  "M. IQBAL ALFI SHOHEIF",
  "M. NIZAM",
  "M. ZIDNI M.",
  "MOCH AMANAHTULAH RAMADHAN",
  "MOHAMMAD ABDUL AZIS",
  "MUHAMMAD ABID AQILA PRANAJA",
  "MUHAMMAD ARSAKHA VIRENDRA RAMADHAN",
  "MUHAMMAD DIMAS PRATAMA",
  "MUHAMMAD ILHAM MUZAKI",
  "MUHAMMAD NIZAMUDDIN",
  "MUHAMMAD ZAINAL ARIFIN",
  "NIZAM ARDIANSYAH",
  "PUTRA YUSUF AFANDI",
  "RIZQI CHOIRUL UMMAM"
];

// =====================================
// MEMBUAT LIST DROPDOWN SECARA DINAMIS
// =====================================
let html = "";
siswa.forEach((nama, i) => {
    html += `
      <label>${nama}</label>
      <select id="s${i}">
          <option value="Hadir">Hadir</option>
          <option value="Sakit">Sakit</option>
          <option value="Izin">Izin</option>
          <option value="Absen">Absen</option>
      </select>
      <br><br>
    `;
});
document.getElementById("siswaList").innerHTML = html;


// ================================
// KIRIM LAPORAN
// ================================
function kirimLaporan() {

    let mapel = document.getElementById("mapel").value;
    let guru = document.getElementById("nama_guru").value;
    let hari = document.getElementById("hari_tanggal").value;
    let materi = document.getElementById("materi").value;

    // ambil status tiap siswa
    let presensi = siswa.map((_, i) => document.getElementById("s" + i).value);

    // -----------------------------------
    // KIRIM ke GOOGLE SPREADSHEET
    // -----------------------------------
    fetch("https://script.google.com/macros/s/AKfycbyuTPK1W-Oi5zuxDyZIRaJeB7z-FbX3S0SBnOrhxh1E-xfdsqSFuknwWmAumjYlK6h6_A/exechttps://script.google.com/macros/s/AKfycbyuTPK1W-Oi5zuxDyZIRaJeB7z-FbX3S0SBnOrhxh1E-xfdsqSFuknwWmAumjYlK6h6_A/exec", {
        method: "POST",
        body: JSON.stringify({
            mapel: mapel,
            nama_guru: guru,
            hari_tanggal: hari,
            materi: materi,
            presensi: presensi
        })
    });

    // -----------------------------------
    // KIRIM ke WHATSAPP
    // -----------------------------------
    let teks = `*Laporan Kehadiran Kelas 7A*%0A%0A`;
    teks += `Mapel: ${mapel}%0A`;
    teks += `Guru: ${guru}%0A`;
    teks += `Hari: ${hari}%0A`;
    teks += `Materi: ${materi}%0A%0A`;

    siswa.forEach((nama, i) => {
        let st = presensi[i];
        let simbol = st === "Hadir" ? "âœ”"
                   : st === "Sakit" ? "[S]"
                   : st === "Izin" ? "[i]"
                   : "[A]";
        let tampil = st === "Absen" ? `*${nama}*` : nama;
        teks += `${tampil}: ${simbol}%0A`;
    });

    window.location.href = "https://wa.me/6282223331745?text=" + teks;
}
</script>

</body>
</html>
